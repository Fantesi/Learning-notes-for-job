### 测试用例的设计

- 软件测试**最重要**的因素是设计和生成有效的测试用例

- 软件测试的最关键问题是：__在所有可能的测试用例中，哪个子集有可能发现最多的错误？__

#### 1.白盒测试

  1. ###### 语句覆盖

     - <img src="C:\Users\hp\Pictures\测试工程师\图4-1被测试的小程序.jpg" alt="IMAGE 4-1" style="zoom:25%;" />

       1. 程序每条语句至少执行一次，如ace，测试效果很弱

2. ###### 判定覆盖或分支覆盖

   - 所有测试用例中，每个**判断都至少有一个为真和为假的输出结果**，即每条分支路径必须至少遍历一次。
   - 如果遇到多入口点或存在**ON单元**（条件触发代码块，__被动触发__，如错误、中断）的情况，这两种情况下的语句不会被执行到
   - 判定覆盖通常满足语句覆盖，除非上一行情况出现，因此判定覆盖__最好要求每个入口点（包括ON单元）至少被调用一次__。
   - 路径ace和abd、以及路径acd、abe满足判定/分支覆盖要求。可以发现**缺陷在于仅有前一种路径覆盖到X未发生变化的情况**，若采用后一种路径测试，则测试效果不足。

3. ###### 条件覆盖

   - 在所有测试用例中，需要__确保将每个判断中的每个条件的所有可能结果至少执行一次。__同时每个入口点至少被调用一次。

   - 比判定覆盖强的原因在于 条件覆盖可能（但并不总是这样）会使每个判断都取到两种（真、假），而判定覆盖做不到。如在下面分支语句中：

     ```C
     DO K=0 to 50 WHILE（J+K<QUEST）
     ```

     中，如果使用判定覆盖，将循环从K=0执行到K=51即可满足，但未考虑到`WHILE`字句初始即为假的情况。此时使用条件覆盖，则必须设计测试用例考虑到该情况。

   - 需要注意的是，虽然条件覆盖某些时候比判定覆盖强，看上去似乎覆盖了判定覆盖的结果，但__并不总是如此，事实是可能覆盖也可能覆盖不到，取决于具体的测试用例__。如`IF(A&B)`，测试用例“A假B真、A真B假”满足条件覆盖，但不满足判定覆盖。

   - 不管是单独使用判定覆盖还是条件覆盖，都存在较明显的缺陷。因此，解决办法是采用_判定/条件覆盖_准则。

4. ###### 判定/条件覆盖

   - 要求__同时满足判定覆盖和条件覆盖__，即一个判断中每个条件的所有可能结果都至少执行一次，同时每个判断的所有可能结果至少执行一次，并将每个入口点都至少调用一次。
   - 优点是测试用例量随条件规模呈线性增长，缺点是无法暴露条件间交互产生的潜在缺陷，条件组合覆盖率低。如`IF(A>0&&B<0)`，设计用例`A=1、B=-2和A=-1、B=2`满足判定/条件覆盖，但忽略了每个条件对判断结果的独立影响。因此引入了_多重条件覆盖_。
   - 适用迭代快速的敏捷项目测试。

5. 多重条件覆盖

   - 要求编写测试用例，将**每个判定中的所有可能的条件结果的组合**，以及所有的入口点都至少执行一次。
   - 缺点是用例量随条件规模呈指数级增长，成本效益比低，**优点是可以覆盖所有条件组合且同时满足前几种覆盖准则，测试准则最强**。
   - 适用高可靠性模块测试。

#### 2.黑盒测试—等价划分

1. ###### 确定等价类

   - 划分依据：通常是规格说明中的一个句子或短语，重点关注`取值范围` `取值个数` `输入值集合` `必须是`

   - 划分方式：

     | 外部条件         | 有效等价类             | 无效等价类 |
     | ---------------- | ---------------------- | ---------- |
     | 数组描述符的个数 | 1个（1），多于1个（2） | 没有（3）  |

2. ###### 生成测试用例

   - 过程如下：
     1. 为每个等价类设置一个不同的编号
     2.  编写测试用例，使每个测试用例__尽可能多地__覆盖尚未被涵盖的__有效等价类__，直至所有有效等价类都被测试用例覆盖
     3. 继续编写测试用例，使每个测试用例__覆盖一个且仅一个__尚未被涵盖的__无效等价类__，直至所有无效等价类都被测试用例覆盖

3. ###### 边界值分析——针对等价划分的补充

   - 边界条件：__输入和输出__等价类中哪些恰好处在边界、或超过边界、或在边界以下的状态。
   
   - 相对于等价类划分，边界值分析需要补充两点：
     - 与从等价类中挑选任意一个元素作为测试代表不同，边界值根据等价类的边界条件选择一个或多个元素，使**等价类的每个边界都经过一次测试**。
     - 除了要考虑输入条件，还需要考虑从结果空间（**输出等价类**）设计测试用例。
     
   - 指南——如何根据边界选择测试用例
     - 若规定输入值范围，选择边界值作为有效用例，选择恰好越界的情况作为无效用例。
     - 考虑到结果空间，先判断输出值范围，再同上选择。
     - 总结就是**选头尾作有效，选超头尾一点点作无效**。
     
   - 相比于普通的等价类划分，边界值分析不会遗漏边界数据的验证。
   
     ------
   
     ###### 补充知识
   
     - 企业软件测试的一般流程：根据产品需求，使用xmind对测试用例进行结构化设计，一般不需要设计具体数据，设计抽象等价类即可 $\rightarrow $ 工具辅助或人工干预生成用例变体$\rightarrow$ 自动化执行测试 。即**XMind用于前期设计+自动化工具执行+数据驱动测试，成为效率与质量平衡的最佳实践**
     - 在xmind阶段，除了设计测试用例外，还需要设定测试优先级和风险等级。设定原则是**优先级看“是否卡住用户”，风险等级看“是否捅破系统”**。
   
     